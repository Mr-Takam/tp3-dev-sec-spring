spring.application.name=tp3-dev-sec-spring

# --- Configuration Réseau Codespaces ---
# Permet à Spring Security de gérer correctement les redirections derrière le proxy Codespaces
server.forward-headers-strategy=framework

# --- Configuration Base de données H2 (In-Memory) ---
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# --- Initialisation des données ---
# Hibernate crée/met à jour les tables automatiquement à partir des entités @Entity
spring.jpa.hibernate.ddl-auto=update

# Force Spring à attendre que Hibernate ait créé les tables avant d'exécuter 
# la logique d'initialisation (InitAccounts)
spring.jpa.defer-datasource-initialization=true

# --- Désactivation de l'initialisation par script SQL ---
# Puisque nous utilisons InitAccounts (CommandLineRunner), nous n'avons plus besoin de data.sql
spring.sql.init.mode=never

# --- Logs et Debugging ---
# Affiche les requêtes SQL générées par Hibernate dans la console
spring.jpa.show-sql=true

# Active les logs détaillés de Spring Security pour débugger les accès (403, etc.)
logging.level.org.springframework.security=debug

# Affiche les détails du mapping des paramètres SQL
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=trace